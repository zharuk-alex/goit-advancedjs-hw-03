{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'https://api.thecatapi.com/v1';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_ip9vENg772mOuhA0bbbqxSNGN3GBlOcVWbB4byHWlD8SQc140oCDL6lp4klQMs1d';\n\nconst fetchBreeds = () => axios.get(`${API_URL}/breeds`).then(res => res.data);\n\nconst fetchCatByBreed = breedId =>\n  axios\n    .get(`${API_URL}/images/search?breed_ids=${breedId}`)\n    .then(res => res.data);\n\nexport { fetchBreeds, fetchCatByBreed };\n","import { fetchBreeds, fetchCatByBreed } from './js/cat-api';\nimport SlimSelect from 'slim-select';\nimport '../node_modules/slim-select/dist/slimselect.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  select: document.querySelector('.breed-select'),\n  loader: document.querySelector('.loader'),\n  article: document.querySelector('.article'),\n};\n\nconst toggleLoader = () => {\n  refs.select.classList.toggle('hidden');\n  refs.loader.classList.toggle('hidden');\n};\n\n// initial\nfetchBreeds()\n  .then(data => {\n    const options = data.map(({ name, id }) => ({ text: name, value: id }));\n    options.unshift({ text: 'Select cat breed', value: '', disabled: true });\n    selectInstance.setData(options);\n  })\n  .catch(error => {\n    iziToast.error({\n      position: 'topCenter',\n      message: `Ooops! Something went wrong! Try reload the page!`,\n    });\n    console.error(error);\n  })\n  .finally(() => toggleLoader());\n\nconst selectChangeHandler = newVal => {\n  const [{ value: catID }] = newVal;\n  if (!catID) {\n    return;\n  }\n\n  selectInstance.settings.disabled = true;\n  toggleLoader();\n  refs.article.classList.add('hidden');\n  fetchCatByBreed(catID)\n    .then(responce => {\n      const [\n        {\n          url: src,\n          breeds: [{ description, name: title, temperament }],\n        },\n      ] = responce;\n\n      refs.article.innerHTML = contentMarkup({\n        src,\n        description,\n        title,\n        temperament,\n      });\n\n      refs.article.classList.remove('hidden');\n    })\n    .catch(error => {\n      iziToast.error({\n        position: 'topCenter',\n        message: `Ooops! Something went wrong! Try reload the page!`,\n      });\n      console.error(error);\n    })\n    .finally(() => {\n      selectInstance.settings.disabled = false;\n      toggleLoader();\n    });\n};\n\nconst selectInstance = new SlimSelect({\n  select: refs.select,\n  events: {\n    afterChange: selectChangeHandler,\n  },\n});\n\nconst contentMarkup = ({ src, title, description, temperament }) => {\n  return `\n    <img class=\"article-image\" src=\"${src}\" alt=\"${title}\">\n    <div class=\"article-item\">\n      <h2 class=\"article-title\">${title}</h2>\n      <p class=\"article-description\">${description}</p>\n      <p class=\"article-addition\">\n        <strong>Temperament: </strong>\n        ${temperament}\n      </p>\n    </div>\n  `;\n};\n"],"names":["API_URL","axios","fetchBreeds","res","fetchCatByBreed","breedId","refs","toggleLoader","data","options","name","id","selectInstance","error","iziToast","selectChangeHandler","newVal","catID","responce","src","description","title","temperament","contentMarkup","SlimSelect"],"mappings":"owBAEA,MAAMA,EAAU,+BAEhBC,EAAM,SAAS,QAAQ,OAAO,WAAW,EACvC,wEAEF,MAAMC,EAAc,IAAMD,EAAM,IAAI,GAAGD,CAAO,SAAS,EAAE,KAAKG,GAAOA,EAAI,IAAI,EAEvEC,EAAkBC,GACtBJ,EACG,IAAI,GAAGD,CAAO,4BAA4BK,CAAO,EAAE,EACnD,KAAKF,GAAOA,EAAI,IAAI,ECNnBG,EAAO,CACX,OAAQ,SAAS,cAAc,eAAe,EAC9C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,UAAU,CAC5C,EAEMC,EAAe,IAAM,CACzBD,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrCA,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,EAGAJ,EAAa,EACV,KAAKM,GAAQ,CACZ,MAAMC,EAAUD,EAAK,IAAI,CAAC,CAAE,KAAAE,EAAM,GAAAC,MAAU,CAAE,KAAMD,EAAM,MAAOC,CAAE,EAAG,EACtEF,EAAQ,QAAQ,CAAE,KAAM,mBAAoB,MAAO,GAAI,SAAU,EAAI,CAAE,EACvEG,EAAe,QAAQH,CAAO,CAClC,CAAG,EACA,MAAMI,GAAS,CACdC,EAAS,MAAM,CACb,SAAU,YACV,QAAS,mDACf,CAAK,EACD,QAAQ,MAAMD,CAAK,CACvB,CAAG,EACA,QAAQ,IAAMN,EAAY,CAAE,EAE/B,MAAMQ,EAAsBC,GAAU,CACpC,KAAM,CAAC,CAAE,MAAOC,CAAO,CAAA,EAAID,EACtBC,IAILL,EAAe,SAAS,SAAW,GACnCL,IACAD,EAAK,QAAQ,UAAU,IAAI,QAAQ,EACnCF,EAAgBa,CAAK,EAClB,KAAKC,GAAY,CAChB,KAAM,CACJ,CACE,IAAKC,EACL,OAAQ,CAAC,CAAE,YAAAC,EAAa,KAAMC,EAAO,YAAAC,CAAW,CAAE,CACnD,CACF,EAAGJ,EAEJZ,EAAK,QAAQ,UAAYiB,EAAc,CACrC,IAAAJ,EACA,YAAAC,EACA,MAAAC,EACA,YAAAC,CACR,CAAO,EAEDhB,EAAK,QAAQ,UAAU,OAAO,QAAQ,CAC5C,CAAK,EACA,MAAMO,GAAS,CACdC,EAAS,MAAM,CACb,SAAU,YACV,QAAS,mDACjB,CAAO,EACD,QAAQ,MAAMD,CAAK,CACzB,CAAK,EACA,QAAQ,IAAM,CACbD,EAAe,SAAS,SAAW,GACnCL,GACN,CAAK,EACL,EAEMK,EAAiB,IAAIY,EAAW,CACpC,OAAQlB,EAAK,OACb,OAAQ,CACN,YAAaS,CACd,CACH,CAAC,EAEKQ,EAAgB,CAAC,CAAE,IAAAJ,EAAK,MAAAE,EAAO,YAAAD,EAAa,YAAAE,CAAW,IACpD;AAAA,sCAC6BH,CAAG,UAAUE,CAAK;AAAA;AAAA,kCAEtBA,CAAK;AAAA,uCACAD,CAAW;AAAA;AAAA;AAAA,UAGxCE,CAAW;AAAA;AAAA;"}